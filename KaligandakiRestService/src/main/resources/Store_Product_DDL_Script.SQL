/*
Created: 1/28/2017
Modified: 2/15/2017
Model: MySQL 5.7
Database: MySQL 5.7
*/


-- Create tables section -------------------------------------------------

-- Table PRODUCT

CREATE TABLE `PRODUCT`
(
  `PRODUCT_ID` Int NOT NULL AUTO_INCREMENT,
  `PRODUCT_NAME` Varchar(50) NOT NULL,
  `PRICE` Double,
  `PRODUCT_CATEGORY` Int NOT NULL,
  `COMPANY` Int NOT NULL,
  `COMMENT` Varchar(100),
  `UPDATED_BY` Varchar(20),
  PRIMARY KEY (`PRODUCT_ID`),
 UNIQUE `product_id` (`PRODUCT_ID`)
)
;

CREATE INDEX `IX_can be of` ON `PRODUCT` (`PRODUCT_CATEGORY`)
;

CREATE INDEX `IX_is mfd by` ON `PRODUCT` (`COMPANY`)
;

-- Table VENDOR

CREATE TABLE `VENDOR`
(
  `VENDOR_ID` Int NOT NULL AUTO_INCREMENT,
  `PRIMARY_CONTACT_NAME` Varchar(50),
  `SECONDARY_CONTACT_NAME` Varchar(50),
  `VENDOR_NAME` Varchar(50) NOT NULL,
  `ADDRESS` Varchar(80),
  `CITY` Varchar(50),
  `PHONE_NUM` Varchar(15),
  `PHONE_NUM_2` Varchar(15),
  `MOBILE_NUM` Varchar(15),
  `MOBILE_NUM_2` Varchar(15),
  `BUSSINESS_START_DATE` Date,
  `BUSINESS_END_DATE` Date,
  `COMMENT` Varchar(100),
  `UPDATED_BY` Varchar(20),
  PRIMARY KEY (`VENDOR_ID`),
 UNIQUE `vendor_id` (`VENDOR_ID`)
)
;

-- Table MFD_COMPANY

CREATE TABLE `MFD_COMPANY`
(
  `COMPANY_ID` Int NOT NULL AUTO_INCREMENT,
  `COMPANY_NAME` Varchar(50) NOT NULL,
  `COMMENT` Varchar(100),
  `UPDATED_BY` Varchar(20),
  PRIMARY KEY (`COMPANY_ID`),
 UNIQUE `company_id` (`COMPANY_ID`)
)
;

-- Table PRODUCT_CATEGORY

CREATE TABLE `PRODUCT_CATEGORY`
(
  `PRODUCT_CATEGORY_ID` Int NOT NULL AUTO_INCREMENT,
  `PRODUCT_CATEGORY` Varchar(30) NOT NULL,
  `PRODUCT_SUBCATEGORY` Varchar(50),
  `MEASUREMENT` Varchar(20),
  `COMMENT` Varchar(100),
  `UPDATED_BY` Varchar(20),
  PRIMARY KEY (`PRODUCT_CATEGORY_ID`),
 UNIQUE `product_type_id` (`PRODUCT_CATEGORY_ID`)
)
;

-- Table VENDOR_PRODUCT

CREATE TABLE `VENDOR_PRODUCT`
(
  `ORDER_ID` Int NOT NULL AUTO_INCREMENT,
  `PRODUCT` Int NOT NULL,
  `VENDOR` Int NOT NULL,
  `INVOICE_NUM` Varchar(30),
  `QUANTITY` Double,
  `RATE` Double,
  `DISCOUNT_PERCENT` Double(3,2),
  `DISCOUNT_AMOUNT` Double,
  `TAX` Double,
  `SUB_TOTAL` Double,
  `TOTAL` Double,
  `ORDER_DATE` Date,
  `SHIPPED_DATE` Date,
  `ARRIVAL_DATE` Date,
  `COMMENT` Varchar(100),
  `UPDATED_BY` Varchar(20),
  PRIMARY KEY (`ORDER_ID`),
 UNIQUE `product_id` (`ORDER_ID`)
)
;

CREATE INDEX `IX_can be in` ON `VENDOR_PRODUCT` (`PRODUCT`)
;

CREATE INDEX `IX_be ordered from` ON `VENDOR_PRODUCT` (`VENDOR`)
;

-- Create relationships section ------------------------------------------------- 

ALTER TABLE `PRODUCT` ADD CONSTRAINT `can be of` FOREIGN KEY (`PRODUCT_CATEGORY`) REFERENCES `PRODUCT_CATEGORY` (`PRODUCT_CATEGORY_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
;

ALTER TABLE `PRODUCT` ADD CONSTRAINT `is mfd by` FOREIGN KEY (`COMPANY`) REFERENCES `MFD_COMPANY` (`COMPANY_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
;

ALTER TABLE `VENDOR_PRODUCT` ADD CONSTRAINT `can be in` FOREIGN KEY (`PRODUCT`) REFERENCES `PRODUCT` (`PRODUCT_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
;

ALTER TABLE `VENDOR_PRODUCT` ADD CONSTRAINT `be ordered from` FOREIGN KEY (`VENDOR`) REFERENCES `VENDOR` (`VENDOR_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
;

